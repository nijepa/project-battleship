(function(t){function e(e){for(var i,a,o=e[0],u=e[1],h=e[2],c=0,d=[];c<o.length;c++)a=o[c],Object.prototype.hasOwnProperty.call(r,a)&&r[a]&&d.push(r[a][0]),r[a]=0;for(i in u)Object.prototype.hasOwnProperty.call(u,i)&&(t[i]=u[i]);p&&p(e);while(d.length)d.shift()();return s.push.apply(s,h||[]),n()}function n(){for(var t,e=0;e<s.length;e++){for(var n=s[e],i=!0,o=1;o<n.length;o++){var u=n[o];0!==r[u]&&(i=!1)}i&&(s.splice(e--,1),t=a(a.s=n[0]))}return t}var i={},r={app:0},s=[];function a(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=i,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)a.d(n,i,function(e){return t[e]}.bind(null,i));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],u=o.push.bind(o);o.push=e,o=o.slice();for(var h=0;h<o.length;h++)e(o[h]);var p=u;s.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"0ad3":function(t,e,n){t.exports=n.p+"./img/3R.0f31361d.png"},"0f4e":function(t,e,n){t.exports=n.p+"./img/1.c7dc77f9.png"},1717:function(t,e,n){t.exports=n.p+"./img/4.1344358b.png"},"23e4":function(t,e,n){t.exports=n.p+"./img/5R.2543fb9a.png"},4421:function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var i=n("2b0e"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{},[n("transition",{attrs:{name:"slide-fade"}},[t.win?n("div",{staticClass:"win"},[t._v(' And the winner is "'),n("span",[t._v(" "+t._s(t.win)+" ")]),t._v('" '),n("button",{on:{click:t.newGame}},[t._v(" ... PLAY AGAIN ?")])]):t._e()]),n("div",{staticClass:"main-game"},[n("h2",[t._v("Player")]),n("h2",[t._v("AI")]),n("game-board",{key:t.playerKey,ref:"player",attrs:{player:!0,width:10},on:{"turn-finished":function(e){return t.turnFinished("player")},winner:function(e){return t.hasWon(e)}}}),n("game-board",{key:t.aiKey,ref:"ai",attrs:{player:!1,width:10},on:{"turn-finished":function(e){return t.turnFinished("ai")},winner:function(e){return t.hasWon(e)}}})],1)],1)},s=[],a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"#game-board"},[i("div",{staticClass:"game-grid",class:{ai:!t.player}},[t._l(t.ships,(function(e,n){return i("game-ship",{key:n,ref:"ships",refInFor:!0,style:t.ships[n].style,attrs:{"ship-index":n,player:t.player,size:e.size,rotated:e.start.x===e.end.x},on:{sunked:t.shipSunked}})})),t._l(t.numberOfSeaTiles,(function(e,r){return i("div",{key:"sea-tile-"+r,class:t.tileClass(r),style:t.tileStyle(r),attrs:{id:"tile-"+r},on:{click:function(e){return t.hitTile(r)}}},[t.tileWasHit(r)?i("img",{attrs:{src:n("d458"),alt:"Explosion"}}):t._e(),t.tileWasMissed(r)?i("img",{attrs:{src:n("a1e4"),alt:"Splash"}}):t._e()])}))],2),i("div",{staticClass:"shipo"},t._l(t.ships,(function(e,n){return i("ships",{key:n,attrs:{size:e.size,"ship-index":n,player:t.player,isSunked:t.shipSunk}})})),1)])},o=[],u=(n("a623"),n("7db0"),n("c740"),n("13d5"),n("45fc"),n("a9e3"),n("8ba4"),n("ade3")),h=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.display?i("div",{class:t.shipTile},[i("img",{attrs:{src:n("ec63")("./"+t.size+(t.rotated?"R":"")+".png"),alt:"ship"}})]):t._e()},p=[],c=(n("caad"),n("2532"),{name:"Ship",props:{size:{type:Number,required:!0},rotated:{type:Boolean,default:!1},player:{type:Boolean,default:!0},shipIndex:{type:Number,default:0}},data:function(){return{hits:[],sunkenShip:{}}},computed:{display:function(){return this.player||this.isSunk()},shipTile:function(){return"ship tile"+(this.isSunk()?" sunk":"")}},methods:{hit:function(t){return!this.hits.includes(t)&&Number.isInteger(t)&&t<=this.size-1&&t>=0&&this.hits.push(t)},isSunk:function(){return this.hits.length>=this.size&&(this.sunkenShip.index||(this.sunkenShip.player=this.player,this.sunkenShip.index=this.shipIndex,this.$emit("sunked",this.sunkenShip))),this.hits.length>=this.size}}}),d=c,f=(n("a0e8"),n("2877")),l=Object(f["a"])(d,h,p,!1,null,"3d7b7ef6",null),m=l.exports,y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"shi",class:{ships:this.isSunked.find((function(e){return e.index===t.shipIndex}))}},[n("p",[t._v(t._s(t.name))])])},x=[],g=(n("b0c0"),{name:"Ships",props:{size:{type:Number,required:!0},player:{type:Boolean,default:!0},shipIndex:{type:Number,default:0},isSunked:{type:Array}},data:function(){return{name:"",ships:!1}},computed:{display:function(){return!0}},mounted:function(){this.shipName()},methods:{shipName:function(){switch(this.size){case 1:this.name="Patrol Boat";break;case 2:this.name="Submarine";break;case 3:this.name="Cruiser";break;case 4:this.name="Aircraft Carrier";break;case 5:this.name="Battle Ship";break}}}}),v=g,b=(n("65e2"),Object(f["a"])(v,y,x,!1,null,"7e0ad8b8",null)),w=b.exports,S={components:{"game-ship":m,Ships:w},props:{width:{type:Number,required:!0},player:{type:Boolean,required:!0}},data:function(){return{ships:[],missedAttacks:[],hits:[],turn:!1,shipSunk:[]}},computed:{numberOfShipTiles:function(){return this.ships.reduce((function(t,e){return e.size+t}),0)},numberOfBlankTiles:function(){return this.width*this.width-this.missedAttacks.length},numberOfMistTitles:function(){return this.player?0:this.numberOfBlankTiles-this.hits.length},numberOfSeaTiles:function(){return this.width*this.width}},watch:{turn:function(){var t,e;if(this.player&&this.turn)do{t=Math.floor(Math.random()*this.width),e=Math.floor(Math.random()*this.width)}while(!this.receiveAttack({x:t,y:e}))}},methods:{shipSunked:function(t){var e=this.shipSunk.find((function(e){return e.index===t.index}));e||this.shipSunk.push(t)},_checkWinner:function(){if(this.allShipsSunk()){var t=this.player?"AI":"Player";return this.$emit("winner",t),!0}},tileWasMissed:function(t){var e=this._getRowColFrom(t),n=e.x,i=e.y;return this.missedAttacks.some((function(t){return t.x===n&&t.y===i}))},_getRowColFrom:function(t){return{x:t%this.width,y:Math.floor(t/this.width)}},tileWasHit:function(t){var e=this._getRowColFrom(t),n=e.x,i=e.y;return this.hits.some((function(t){return t.x===n&&t.y===i}))},hitTile:function(t){this.turn&&this.receiveAttack(this._getRowColFrom(t))},tileClass:function(t){var e,n=this._getRowColFrom(t),i=n.x,r=n.y,s=this.$refs.ships,a=this._shipAtPoint({x:i,y:r});s&&(e=s.find((function(t){return t.shipIndex===a})));var o=this.tileWasHit(t)?"hit-tile ":"";return o+(this.player||s&&e&&e.isSunk()?"sea-tile tile":"mist-tile tile")},tileStyle:function(t){var e=this._getRowColFrom(t),n=e.y,i=e.x;return{gridColumn:i+1,gridRow:n+1}},valCoord:function(t){return Number.isInteger(t)&&t>=0&&t<this.width},_shipAtPoint:function(t){var e=t.x,n=t.y;return this.ships.findIndex((function(t){return t.start.x===e&&t.start.y<=n&&t.end.y>=n||t.start.y===n&&t.start.x<=e&&t.end.x>=e}))},_shipOnPath:function(t){var e=t.start,n=t.end,i=t.mov,r=t.fix,s=e[i];while(s<=n[i]){var a;if(this._shipAtPoint((a={},Object(u["a"])(a,r,e[r]),Object(u["a"])(a,i,s),a))>=0)return!0;s++}return!1},_shipBetween:function(t){var e=t.start,n=t.end,i=e.x===n.x?{mov:"y",fix:"x"}:{mov:"x",fix:"y"},r=i.mov,s=i.fix;return this._shipOnPath({start:e,end:n,mov:r,fix:s})},_setShipStyle:function(t){var e=t.start,n=t.end;return{gridColumnStart:"".concat(e.x+1),gridColumnEnd:"".concat(n.x+2),gridRowStart:"".concat(e.y+1),gridRowEnd:"".concat(n.y+2)}},_newShipOn:function(t){var e=t.axis,n=t.start,i=t.end,r=Math.abs(n[e]-i[e])+1;return r>=1&&r<=5&&this.ships.push({size:r,start:n,end:i,style:this._setShipStyle({start:n,end:i})})},newShip:function(t){var e=t.start,n=t.end;return[e.x,e.y,n.x,n.y].every(this.valCoord)&&!this._shipBetween({start:e,end:n})&&(e.x-n.x===0&&this._newShipOn({axis:"y",start:e,end:n})||e.y-n.y===0&&this._newShipOn({axis:"x",start:e,end:n}))},randomShip:function(t){var e,n,i={},r={};do{e=Math.random()>.5?"x":"y",n="x"===e?"y":"x",i[n]=Math.floor(Math.random()*this.width),i[e]=Math.floor(Math.random()*(this.width-t)),r[n]=i[n],r[e]=t-1+i[e]}while(!this.newShip({start:i,end:r}))},receiveAttack:function(t){var e=t.x,n=t.y;if(this.missedAttacks.some((function(t){return t.x===e&&t.y===n}))||this.hits.some((function(t){return t.x===e&&t.y===n})))return!1;this.$emit("turn-finished");var i=this._shipAtPoint({x:e,y:n});if(i>=0){var r=this.$refs.ships.find((function(t){return t.shipIndex===i})),s=this.ships[i],a=s.start,o=s.end,u=a.x===o.x?n-a.y:e-a.x;return!!r.hit(u)&&!!this.hits.push({x:e,y:n})&&(this._checkWinner()||!0)}return!!this.missedAttacks.push({x:e,y:n})},allShipsSunk:function(){return this.$refs.ships.every((function(t){return t.isSunk()}))}}},k=S,_=(n("e2a0"),Object(f["a"])(k,a,o,!1,null,"53b15dc3",null)),O=_.exports,C={data:function(){return{playerKey:0,aiKey:1e3,win:""}},components:{GameBoard:O},mounted:function(){this.setup()},methods:{setupBoard:function(t){t.randomShip(5),t.randomShip(4),t.randomShip(3),t.randomShip(3),t.randomShip(2),t.randomShip(2),t.randomShip(1),t.randomShip(1)},turnFinished:function(t){var e="player"===t?"ai":"player";this.$refs[t].turn=!1,this.$refs[e].turn=!0},newGame:function(){this.win="",this.playerKey++,this.aiKey++,this.setup()},hasWon:function(t){this.win=t},setup:function(){var t=this;this.$nextTick((function(){t.setupBoard(t.$refs.player),t.setupBoard(t.$refs.ai),t.$refs.ai.turn=!0}))}}},R=C,A=(n("5c0b"),Object(f["a"])(R,r,s,!1,null,null,null)),M=A.exports;i["a"].config.productionTip=!1,new i["a"]({render:function(t){return t(M)}}).$mount("#app")},"56e8":function(t,e,n){t.exports=n.p+"./img/2.fd6db7dd.png"},"5c0b":function(t,e,n){"use strict";var i=n("9c0c"),r=n.n(i);r.a},"65e2":function(t,e,n){"use strict";var i=n("4421"),r=n.n(i);r.a},7403:function(t,e,n){t.exports=n.p+"./img/5.5b70280e.png"},"9c0c":function(t,e,n){},"9f47":function(t,e,n){t.exports=n.p+"./img/1R1.674bd954.png"},a0e8:function(t,e,n){"use strict";var i=n("b841"),r=n.n(i);r.a},a1e4:function(t,e,n){t.exports=n.p+"./img/splash.6a95f7f8.png"},a316:function(t,e,n){t.exports=n.p+"./img/3.30121bfa.png"},b797:function(t,e,n){t.exports=n.p+"./img/4R.4e4cd667.png"},b841:function(t,e,n){},bf7e:function(t,e,n){t.exports=n.p+"./img/1R.c7dc77f9.png"},d458:function(t,e,n){t.exports=n.p+"./img/explosion.22d10d00.png"},e0ad:function(t,e,n){t.exports=n.p+"./img/2R.a5aa606e.png"},e2a0:function(t,e,n){"use strict";var i=n("fecd"),r=n.n(i);r.a},ec63:function(t,e,n){var i={"./1.png":"0f4e","./1R.png":"bf7e","./1R1.png":"9f47","./2.png":"56e8","./2R.png":"e0ad","./3.png":"a316","./3R.png":"0ad3","./4.png":"1717","./4R.png":"b797","./5.png":"7403","./5R.png":"23e4"};function r(t){var e=s(t);return n(e)}function s(t){if(!n.o(i,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return i[t]}r.keys=function(){return Object.keys(i)},r.resolve=s,t.exports=r,r.id="ec63"},fecd:function(t,e,n){}});
//# sourceMappingURL=app.454a3159.js.map
